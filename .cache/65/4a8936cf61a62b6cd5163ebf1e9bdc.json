{"id":"NxOD","dependencies":[{"name":"/Users/lennertderyck/Documents/GitHub/begrotingen/package.json","includedInParent":true,"mtime":1598613936257},{"name":"./plugins/firebase","loc":{"line":1,"column":19},"parent":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/userControl.js","resolved":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/plugins/firebase.js"},{"name":"./uiControl","loc":{"line":2,"column":49},"parent":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/userControl.js","resolved":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/uiControl.js"},{"name":"./dataControl","loc":{"line":3,"column":19},"parent":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/userControl.js","resolved":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/dataControl.js"},{"name":"./utils","loc":{"line":4,"column":24},"parent":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/userControl.js","resolved":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/utils.js"},{"name":"cutleryjs","loc":{"line":5,"column":19},"parent":"/Users/lennertderyck/Documents/GitHub/begrotingen/static/modules/userControl.js","resolved":"/Users/lennertderyck/Documents/GitHub/begrotingen/node_modules/cutleryjs/dist/js/index.min.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.domAccess=exports.user=void 0;var e=require(\"./plugins/firebase\"),t=require(\"./uiControl\"),o=require(\"./dataControl\"),s=require(\"./utils\"),a=require(\"cutleryjs\");const n={async init(){e.auth.onAuthStateChanged(async e=>{e?(n.active=await this.getUserData(e.uid),t.templates.switch(\"groupSelect\",()=>{n.ui(n.active.data.access)},!0)):t.templates.switch(\"userLogIn\")})},logIn({email:o,passw:a}){(0,t.createToast)({title:\"Login\",content:\"Je wordt aangemeld\"}),n.logInScreen(!1),e.auth.signInWithEmailAndPassword(o,a).then(e=>{console.log(e)}).catch(e=>{\"auth/user-not-found\"==e.code&&(0,s.formError)(\"Deze gebruiker werd niet gevonden\"),n.logInScreen(!0)})},demoLogin(){n.logIn({email:\"demo@haegepoorters.be\",passw:\"demo123\"})},logOut(){(0,t.createToast)({title:\"Afmelden\",content:\"Je wordt afgemeld\"}),e.auth.signOut()},checkForLogIn(){1!=t.ui.shareMode()&&t.templates.switch(\"groupSelect\")},getUserData:async e=>await o.data.getDoc(\"users\",e),async ui(e=null){null==e&&(e=n.active.data.access);[\"kapoenen\",\"welpen\",\"woudlopers\",\"jonggivers\",\"givers\",\"groepsleiding\",\"demo\"].forEach(t=>{const o=(0,a.node)(`#form_step1 input[value=\"${t}\"]`).closest(\".form__group\");\"none\"==e[t]&&o&&o.remove()})},accessControl(){const e=n.active?n.active.data.access[window.appSettings.group]:\"none\";\"none\"==e&&console.log(\"prohibited access\"),\"read\"==e&&t.ui.readMode(!0),\"write\"==e&&t.ui.readMode(!1)},logInScreen(e=!0){const t=(0,a.node)('[data-section=\"step0\"] .login-wrapper');0==e?(t.classList.add(\"login-wrapper--validating\"),t.classList.remove(\"login-wrapper--form\")):1==e&&(t.classList.remove(\"login-wrapper--validating\"),t.classList.add(\"login-wrapper--form\"))},getRole(){console.log(\"user\",n.active.data.role)}};exports.user=n;const r={user:{settings:!1,config:!1},poweruser:{settings:!0,config:!1},admin:{settings:!0,config:!0}},i={init(){console.log(i.getNodes()),n.getRole(),i.generateRightsForm()},getNodes:()=>(0,a.node)(\"[data-access]\",!0),generateRightsForm(){(0,a.node)('[data-form=\"userRights\"]');const e=(0,a.node)('[data-form=\"userRights\"] [data-label=\"rightsList\"]');i.getNodes().forEach(t=>{const o=t.dataset.access,s=`\\n                <label class=\"d-block\">\\n                    <span class=\"form-label\">${o}</span>\\n                    <input type=\"checkbox\" name=\"${o}\">\\n                </label>\\n            `;e.innerHTML+=s})}};exports.domAccess=i;"},"sourceMaps":{"js":{"mappings":[{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":0}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":13}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":20}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":35}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":43}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":56}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":57}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":64}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":68}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":76}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":86}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":94}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":104}},{"source":"static/modules/userControl.js","original":{"line":1,"column":0},"generated":{"line":1,"column":106}},{"source":"static/modules/userControl.js","original":{"line":1,"column":0},"generated":{"line":1,"column":110}},{"source":"static/modules/userControl.js","original":{"line":1,"column":0},"generated":{"line":1,"column":112}},{"source":"static/modules/userControl.js","original":{"line":1,"column":0},"generated":{"line":1,"column":120}},{"source":"static/modules/userControl.js","original":{"line":2,"column":0},"generated":{"line":1,"column":142}},{"source":"static/modules/userControl.js","original":{"line":2,"column":0},"generated":{"line":1,"column":144}},{"source":"static/modules/userControl.js","original":{"line":2,"column":0},"generated":{"line":1,"column":152}},{"source":"static/modules/userControl.js","original":{"line":3,"column":0},"generated":{"line":1,"column":167}},{"source":"static/modules/userControl.js","original":{"line":3,"column":0},"generated":{"line":1,"column":169}},{"source":"static/modules/userControl.js","original":{"line":3,"column":0},"generated":{"line":1,"column":177}},{"source":"static/modules/userControl.js","original":{"line":4,"column":0},"generated":{"line":1,"column":194}},{"source":"static/modules/userControl.js","original":{"line":4,"column":0},"generated":{"line":1,"column":196}},{"source":"static/modules/userControl.js","original":{"line":4,"column":0},"generated":{"line":1,"column":204}},{"source":"static/modules/userControl.js","original":{"line":5,"column":0},"generated":{"line":1,"column":215}},{"source":"static/modules/userControl.js","original":{"line":5,"column":0},"generated":{"line":1,"column":217}},{"source":"static/modules/userControl.js","original":{"line":5,"column":0},"generated":{"line":1,"column":225}},{"source":"static/modules/userControl.js","original":{"line":7,"column":0},"generated":{"line":1,"column":238}},{"source":"static/modules/userControl.js","name":"user","original":{"line":7,"column":6},"generated":{"line":1,"column":244}},{"source":"static/modules/userControl.js","original":{"line":7,"column":13},"generated":{"line":1,"column":246}},{"source":"static/modules/userControl.js","name":"init","original":{"line":8,"column":10},"generated":{"line":1,"column":247}},{"source":"static/modules/userControl.js","name":"onAuthStateChanged","original":{"line":9,"column":13},"generated":{"line":1,"column":260}},{"source":"static/modules/userControl.js","name":"onAuthStateChanged","original":{"line":9,"column":13},"generated":{"line":1,"column":262}},{"source":"static/modules/userControl.js","name":"onAuthStateChanged","original":{"line":9,"column":13},"generated":{"line":1,"column":267}},{"source":"static/modules/userControl.js","original":{"line":9,"column":32},"generated":{"line":1,"column":286}},{"source":"static/modules/userControl.js","original":{"line":9,"column":32},"generated":{"line":1,"column":292}},{"source":"static/modules/userControl.js","name":"state","original":{"line":10,"column":16},"generated":{"line":1,"column":296}},{"source":"static/modules/userControl.js","name":"user","original":{"line":11,"column":16},"generated":{"line":1,"column":299}},{"source":"static/modules/userControl.js","name":"active","original":{"line":11,"column":21},"generated":{"line":1,"column":301}},{"source":"static/modules/userControl.js","original":{"line":11,"column":36},"generated":{"line":1,"column":314}},{"source":"static/modules/userControl.js","name":"getUserData","original":{"line":11,"column":41},"generated":{"line":1,"column":319}},{"source":"static/modules/userControl.js","name":"state","original":{"line":11,"column":53},"generated":{"line":1,"column":331}},{"source":"static/modules/userControl.js","name":"uid","original":{"line":11,"column":59},"generated":{"line":1,"column":333}},{"source":"static/modules/userControl.js","name":"switch","original":{"line":13,"column":26},"generated":{"line":1,"column":338}},{"source":"static/modules/userControl.js","name":"switch","original":{"line":13,"column":26},"generated":{"line":1,"column":340}},{"source":"static/modules/userControl.js","name":"switch","original":{"line":13,"column":26},"generated":{"line":1,"column":350}},{"source":"static/modules/userControl.js","original":{"line":13,"column":33},"generated":{"line":1,"column":357}},{"source":"static/modules/userControl.js","original":{"line":13,"column":48},"generated":{"line":1,"column":371}},{"source":"static/modules/userControl.js","name":"user","original":{"line":14,"column":20},"generated":{"line":1,"column":376}},{"source":"static/modules/userControl.js","name":"ui","original":{"line":14,"column":25},"generated":{"line":1,"column":378}},{"source":"static/modules/userControl.js","name":"user","original":{"line":14,"column":28},"generated":{"line":1,"column":381}},{"source":"static/modules/userControl.js","name":"active","original":{"line":14,"column":33},"generated":{"line":1,"column":383}},{"source":"static/modules/userControl.js","name":"data","original":{"line":14,"column":40},"generated":{"line":1,"column":390}},{"source":"static/modules/userControl.js","name":"access","original":{"line":14,"column":45},"generated":{"line":1,"column":395}},{"source":"static/modules/userControl.js","original":{"line":15,"column":19},"generated":{"line":1,"column":405}},{"source":"static/modules/userControl.js","name":"switch","original":{"line":17,"column":26},"generated":{"line":1,"column":409}},{"source":"static/modules/userControl.js","name":"switch","original":{"line":17,"column":26},"generated":{"line":1,"column":411}},{"source":"static/modules/userControl.js","name":"switch","original":{"line":17,"column":26},"generated":{"line":1,"column":421}},{"source":"static/modules/userControl.js","original":{"line":17,"column":33},"generated":{"line":1,"column":428}},{"source":"static/modules/userControl.js","name":"logIn","original":{"line":22,"column":4},"generated":{"line":1,"column":444}},{"source":"static/modules/userControl.js","original":{"line":22,"column":10},"generated":{"line":1,"column":451}},{"source":"static/modules/userControl.js","name":"email","original":{"line":22,"column":11},"generated":{"line":1,"column":457}},{"source":"static/modules/userControl.js","original":{"line":22,"column":10},"generated":{"line":1,"column":459}},{"source":"static/modules/userControl.js","name":"passw","original":{"line":22,"column":18},"generated":{"line":1,"column":465}},{"source":"static/modules/userControl.js","original":{"line":23,"column":20},"generated":{"line":1,"column":470}},{"source":"static/modules/userControl.js","original":{"line":23,"column":20},"generated":{"line":1,"column":472}},{"source":"static/modules/userControl.js","original":{"line":23,"column":20},"generated":{"line":1,"column":474}},{"source":"static/modules/userControl.js","original":{"line":23,"column":20},"generated":{"line":1,"column":487}},{"source":"static/modules/userControl.js","name":"title","original":{"line":24,"column":12},"generated":{"line":1,"column":488}},{"source":"static/modules/userControl.js","original":{"line":24,"column":19},"generated":{"line":1,"column":494}},{"source":"static/modules/userControl.js","name":"content","original":{"line":25,"column":12},"generated":{"line":1,"column":502}},{"source":"static/modules/userControl.js","original":{"line":25,"column":21},"generated":{"line":1,"column":510}},{"source":"static/modules/userControl.js","name":"user","original":{"line":27,"column":8},"generated":{"line":1,"column":533}},{"source":"static/modules/userControl.js","name":"logInScreen","original":{"line":27,"column":13},"generated":{"line":1,"column":535}},{"source":"static/modules/userControl.js","original":{"line":27,"column":25},"generated":{"line":1,"column":548}},{"source":"static/modules/userControl.js","name":"signInWithEmailAndPassword","original":{"line":28,"column":13},"generated":{"line":1,"column":551}},{"source":"static/modules/userControl.js","name":"signInWithEmailAndPassword","original":{"line":28,"column":13},"generated":{"line":1,"column":553}},{"source":"static/modules/userControl.js","name":"signInWithEmailAndPassword","original":{"line":28,"column":13},"generated":{"line":1,"column":558}},{"source":"static/modules/userControl.js","name":"email","original":{"line":28,"column":40},"generated":{"line":1,"column":585}},{"source":"static/modules/userControl.js","name":"passw","original":{"line":28,"column":47},"generated":{"line":1,"column":587}},{"source":"static/modules/userControl.js","name":"then","original":{"line":29,"column":9},"generated":{"line":1,"column":590}},{"source":"static/modules/userControl.js","name":"resp","original":{"line":29,"column":14},"generated":{"line":1,"column":595}},{"source":"static/modules/userControl.js","name":"console","original":{"line":29,"column":23},"generated":{"line":1,"column":599}},{"source":"static/modules/userControl.js","name":"log","original":{"line":29,"column":31},"generated":{"line":1,"column":607}},{"source":"static/modules/userControl.js","name":"resp","original":{"line":29,"column":35},"generated":{"line":1,"column":611}},{"source":"static/modules/userControl.js","name":"catch","original":{"line":30,"column":9},"generated":{"line":1,"column":616}},{"source":"static/modules/userControl.js","name":"err","original":{"line":30,"column":15},"generated":{"line":1,"column":622}},{"source":"static/modules/userControl.js","original":{"line":31,"column":28},"generated":{"line":1,"column":626}},{"source":"static/modules/userControl.js","name":"err","original":{"line":31,"column":16},"generated":{"line":1,"column":649}},{"source":"static/modules/userControl.js","name":"code","original":{"line":31,"column":20},"generated":{"line":1,"column":651}},{"source":"static/modules/userControl.js","original":{"line":31,"column":51},"generated":{"line":1,"column":658}},{"source":"static/modules/userControl.js","original":{"line":31,"column":61},"generated":{"line":1,"column":660}},{"source":"static/modules/userControl.js","original":{"line":31,"column":61},"generated":{"line":1,"column":662}},{"source":"static/modules/userControl.js","original":{"line":31,"column":61},"generated":{"line":1,"column":673}},{"source":"static/modules/userControl.js","name":"user","original":{"line":32,"column":12},"generated":{"line":1,"column":710}},{"source":"static/modules/userControl.js","name":"logInScreen","original":{"line":32,"column":17},"generated":{"line":1,"column":712}},{"source":"static/modules/userControl.js","original":{"line":32,"column":29},"generated":{"line":1,"column":725}},{"source":"static/modules/userControl.js","name":"demoLogin","original":{"line":36,"column":4},"generated":{"line":1,"column":731}},{"source":"static/modules/userControl.js","name":"user","original":{"line":41,"column":8},"generated":{"line":1,"column":743}},{"source":"static/modules/userControl.js","name":"logIn","original":{"line":41,"column":13},"generated":{"line":1,"column":745}},{"source":"static/modules/userControl.js","original":{"line":41,"column":19},"generated":{"line":1,"column":751}},{"source":"static/modules/userControl.js","name":"email","original":{"line":42,"column":12},"generated":{"line":1,"column":752}},{"source":"static/modules/userControl.js","original":{"line":42,"column":19},"generated":{"line":1,"column":758}},{"source":"static/modules/userControl.js","name":"passw","original":{"line":43,"column":12},"generated":{"line":1,"column":782}},{"source":"static/modules/userControl.js","original":{"line":43,"column":19},"generated":{"line":1,"column":788}},{"source":"static/modules/userControl.js","name":"logOut","original":{"line":47,"column":4},"generated":{"line":1,"column":801}},{"source":"static/modules/userControl.js","original":{"line":48,"column":20},"generated":{"line":1,"column":811}},{"source":"static/modules/userControl.js","original":{"line":48,"column":20},"generated":{"line":1,"column":813}},{"source":"static/modules/userControl.js","original":{"line":48,"column":20},"generated":{"line":1,"column":815}},{"source":"static/modules/userControl.js","original":{"line":48,"column":20},"generated":{"line":1,"column":828}},{"source":"static/modules/userControl.js","name":"title","original":{"line":49,"column":12},"generated":{"line":1,"column":829}},{"source":"static/modules/userControl.js","original":{"line":49,"column":19},"generated":{"line":1,"column":835}},{"source":"static/modules/userControl.js","name":"content","original":{"line":50,"column":12},"generated":{"line":1,"column":846}},{"source":"static/modules/userControl.js","original":{"line":50,"column":21},"generated":{"line":1,"column":854}},{"source":"static/modules/userControl.js","name":"signOut","original":{"line":52,"column":13},"generated":{"line":1,"column":876}},{"source":"static/modules/userControl.js","name":"signOut","original":{"line":52,"column":13},"generated":{"line":1,"column":878}},{"source":"static/modules/userControl.js","name":"signOut","original":{"line":52,"column":13},"generated":{"line":1,"column":883}},{"source":"static/modules/userControl.js","name":"checkForLogIn","original":{"line":55,"column":4},"generated":{"line":1,"column":894}},{"source":"static/modules/userControl.js","original":{"line":56,"column":30},"generated":{"line":1,"column":910}},{"source":"static/modules/userControl.js","name":"ui","original":{"line":56,"column":12},"generated":{"line":1,"column":913}},{"source":"static/modules/userControl.js","name":"shareMode","original":{"line":56,"column":15},"generated":{"line":1,"column":915}},{"source":"static/modules/userControl.js","name":"shareMode","original":{"line":56,"column":15},"generated":{"line":1,"column":918}},{"source":"static/modules/userControl.js","name":"templates","original":{"line":56,"column":36},"generated":{"line":1,"column":931}},{"source":"static/modules/userControl.js","name":"switch","original":{"line":56,"column":46},"generated":{"line":1,"column":933}},{"source":"static/modules/userControl.js","name":"switch","original":{"line":56,"column":46},"generated":{"line":1,"column":943}},{"source":"static/modules/userControl.js","original":{"line":56,"column":53},"generated":{"line":1,"column":950}},{"source":"static/modules/userControl.js","name":"getUserData","original":{"line":59,"column":10},"generated":{"line":1,"column":966}},{"source":"static/modules/userControl.js","original":{"line":59,"column":4},"generated":{"line":1,"column":978}},{"source":"static/modules/userControl.js","name":"id","original":{"line":59,"column":22},"generated":{"line":1,"column":984}},{"source":"static/modules/userControl.js","name":"data","original":{"line":60,"column":31},"generated":{"line":1,"column":993}},{"source":"static/modules/userControl.js","name":"getDoc","original":{"line":60,"column":36},"generated":{"line":1,"column":995}},{"source":"static/modules/userControl.js","name":"getDoc","original":{"line":60,"column":36},"generated":{"line":1,"column":1000}},{"source":"static/modules/userControl.js","original":{"line":60,"column":43},"generated":{"line":1,"column":1007}},{"source":"static/modules/userControl.js","name":"id","original":{"line":60,"column":52},"generated":{"line":1,"column":1015}},{"source":"static/modules/userControl.js","name":"ui","original":{"line":64,"column":10},"generated":{"line":1,"column":1018}},{"source":"static/modules/userControl.js","name":"accessData","original":{"line":64,"column":13},"generated":{"line":1,"column":1027}},{"source":"static/modules/userControl.js","original":{"line":64,"column":26},"generated":{"line":1,"column":1029}},{"source":"static/modules/userControl.js","original":{"line":65,"column":26},"generated":{"line":1,"column":1035}},{"source":"static/modules/userControl.js","name":"accessData","original":{"line":65,"column":12},"generated":{"line":1,"column":1041}},{"source":"static/modules/userControl.js","name":"accessData","original":{"line":65,"column":33},"generated":{"line":1,"column":1045}},{"source":"static/modules/userControl.js","name":"user","original":{"line":65,"column":46},"generated":{"line":1,"column":1047}},{"source":"static/modules/userControl.js","name":"active","original":{"line":65,"column":51},"generated":{"line":1,"column":1049}},{"source":"static/modules/userControl.js","name":"data","original":{"line":65,"column":58},"generated":{"line":1,"column":1056}},{"source":"static/modules/userControl.js","name":"access","original":{"line":65,"column":63},"generated":{"line":1,"column":1061}},{"source":"static/modules/userControl.js","original":{"line":67,"column":23},"generated":{"line":1,"column":1069}},{"source":"static/modules/userControl.js","original":{"line":67,"column":24},"generated":{"line":1,"column":1070}},{"source":"static/modules/userControl.js","original":{"line":67,"column":36},"generated":{"line":1,"column":1081}},{"source":"static/modules/userControl.js","original":{"line":67,"column":46},"generated":{"line":1,"column":1090}},{"source":"static/modules/userControl.js","original":{"line":67,"column":60},"generated":{"line":1,"column":1103}},{"source":"static/modules/userControl.js","original":{"line":67,"column":74},"generated":{"line":1,"column":1116}},{"source":"static/modules/userControl.js","original":{"line":67,"column":84},"generated":{"line":1,"column":1125}},{"source":"static/modules/userControl.js","original":{"line":67,"column":101},"generated":{"line":1,"column":1141}},{"source":"static/modules/userControl.js","name":"forEach","original":{"line":68,"column":15},"generated":{"line":1,"column":1149}},{"source":"static/modules/userControl.js","name":"group","original":{"line":68,"column":23},"generated":{"line":1,"column":1157}},{"source":"static/modules/userControl.js","name":"input","original":{"line":69,"column":18},"generated":{"line":1,"column":1161}},{"source":"static/modules/userControl.js","name":"input","original":{"line":69,"column":18},"generated":{"line":1,"column":1167}},{"source":"static/modules/userControl.js","original":{"line":69,"column":26},"generated":{"line":1,"column":1170}},{"source":"static/modules/userControl.js","original":{"line":69,"column":32},"generated":{"line":1,"column":1172}},{"source":"static/modules/userControl.js","original":{"line":69,"column":32},"generated":{"line":1,"column":1174}},{"source":"static/modules/userControl.js","name":"group","original":{"line":69,"column":59},"generated":{"line":1,"column":1208}},{"source":"static/modules/userControl.js","name":"closest","original":{"line":69,"column":70},"generated":{"line":1,"column":1215}},{"source":"static/modules/userControl.js","original":{"line":69,"column":78},"generated":{"line":1,"column":1223}},{"source":"static/modules/userControl.js","original":{"line":70,"column":37},"generated":{"line":1,"column":1239}},{"source":"static/modules/userControl.js","name":"accessData","original":{"line":70,"column":16},"generated":{"line":1,"column":1247}},{"source":"static/modules/userControl.js","name":"group","original":{"line":70,"column":27},"generated":{"line":1,"column":1249}},{"source":"static/modules/userControl.js","name":"input","original":{"line":70,"column":47},"generated":{"line":1,"column":1253}},{"source":"static/modules/userControl.js","name":"input","original":{"line":70,"column":54},"generated":{"line":1,"column":1256}},{"source":"static/modules/userControl.js","name":"remove","original":{"line":70,"column":60},"generated":{"line":1,"column":1258}},{"source":"static/modules/userControl.js","name":"accessControl","original":{"line":74,"column":4},"generated":{"line":1,"column":1270}},{"source":"static/modules/userControl.js","name":"access","original":{"line":75,"column":14},"generated":{"line":1,"column":1286}},{"source":"static/modules/userControl.js","name":"access","original":{"line":75,"column":14},"generated":{"line":1,"column":1292}},{"source":"static/modules/userControl.js","name":"user","original":{"line":75,"column":23},"generated":{"line":1,"column":1294}},{"source":"static/modules/userControl.js","name":"active","original":{"line":75,"column":28},"generated":{"line":1,"column":1296}},{"source":"static/modules/userControl.js","name":"user","original":{"line":75,"column":37},"generated":{"line":1,"column":1303}},{"source":"static/modules/userControl.js","name":"active","original":{"line":75,"column":42},"generated":{"line":1,"column":1305}},{"source":"static/modules/userControl.js","name":"data","original":{"line":75,"column":49},"generated":{"line":1,"column":1312}},{"source":"static/modules/userControl.js","name":"access","original":{"line":75,"column":54},"generated":{"line":1,"column":1317}},{"source":"static/modules/userControl.js","name":"window","original":{"line":75,"column":61},"generated":{"line":1,"column":1324}},{"source":"static/modules/userControl.js","name":"appSettings","original":{"line":75,"column":68},"generated":{"line":1,"column":1331}},{"source":"static/modules/userControl.js","name":"group","original":{"line":75,"column":80},"generated":{"line":1,"column":1343}},{"source":"static/modules/userControl.js","original":{"line":75,"column":89},"generated":{"line":1,"column":1350}},{"source":"static/modules/userControl.js","original":{"line":77,"column":22},"generated":{"line":1,"column":1357}},{"source":"static/modules/userControl.js","name":"access","original":{"line":77,"column":12},"generated":{"line":1,"column":1365}},{"source":"static/modules/userControl.js","name":"console","original":{"line":77,"column":30},"generated":{"line":1,"column":1368}},{"source":"static/modules/userControl.js","name":"log","original":{"line":77,"column":38},"generated":{"line":1,"column":1376}},{"source":"static/modules/userControl.js","original":{"line":77,"column":42},"generated":{"line":1,"column":1380}},{"source":"static/modules/userControl.js","original":{"line":78,"column":22},"generated":{"line":1,"column":1401}},{"source":"static/modules/userControl.js","name":"access","original":{"line":78,"column":12},"generated":{"line":1,"column":1409}},{"source":"static/modules/userControl.js","name":"ui","original":{"line":78,"column":30},"generated":{"line":1,"column":1412}},{"source":"static/modules/userControl.js","name":"readMode","original":{"line":78,"column":33},"generated":{"line":1,"column":1414}},{"source":"static/modules/userControl.js","name":"readMode","original":{"line":78,"column":33},"generated":{"line":1,"column":1417}},{"source":"static/modules/userControl.js","original":{"line":78,"column":42},"generated":{"line":1,"column":1427}},{"source":"static/modules/userControl.js","original":{"line":79,"column":22},"generated":{"line":1,"column":1430}},{"source":"static/modules/userControl.js","name":"access","original":{"line":79,"column":12},"generated":{"line":1,"column":1439}},{"source":"static/modules/userControl.js","name":"ui","original":{"line":79,"column":31},"generated":{"line":1,"column":1442}},{"source":"static/modules/userControl.js","name":"readMode","original":{"line":79,"column":34},"generated":{"line":1,"column":1444}},{"source":"static/modules/userControl.js","name":"readMode","original":{"line":79,"column":34},"generated":{"line":1,"column":1447}},{"source":"static/modules/userControl.js","original":{"line":79,"column":43},"generated":{"line":1,"column":1457}},{"source":"static/modules/userControl.js","name":"logInScreen","original":{"line":82,"column":4},"generated":{"line":1,"column":1461}},{"source":"static/modules/userControl.js","name":"bool","original":{"line":82,"column":16},"generated":{"line":1,"column":1473}},{"source":"static/modules/userControl.js","original":{"line":82,"column":23},"generated":{"line":1,"column":1476}},{"source":"static/modules/userControl.js","name":"wrapper","original":{"line":83,"column":14},"generated":{"line":1,"column":1479}},{"source":"static/modules/userControl.js","name":"wrapper","original":{"line":83,"column":14},"generated":{"line":1,"column":1485}},{"source":"static/modules/userControl.js","original":{"line":83,"column":24},"generated":{"line":1,"column":1488}},{"source":"static/modules/userControl.js","original":{"line":83,"column":29},"generated":{"line":1,"column":1490}},{"source":"static/modules/userControl.js","original":{"line":83,"column":29},"generated":{"line":1,"column":1492}},{"source":"static/modules/userControl.js","original":{"line":83,"column":29},"generated":{"line":1,"column":1498}},{"source":"static/modules/userControl.js","original":{"line":85,"column":20},"generated":{"line":1,"column":1539}},{"source":"static/modules/userControl.js","name":"bool","original":{"line":85,"column":12},"generated":{"line":1,"column":1542}},{"source":"static/modules/userControl.js","name":"wrapper","original":{"line":86,"column":12},"generated":{"line":1,"column":1545}},{"source":"static/modules/userControl.js","name":"classList","original":{"line":86,"column":20},"generated":{"line":1,"column":1547}},{"source":"static/modules/userControl.js","name":"add","original":{"line":86,"column":30},"generated":{"line":1,"column":1557}},{"source":"static/modules/userControl.js","original":{"line":86,"column":34},"generated":{"line":1,"column":1561}},{"source":"static/modules/userControl.js","name":"wrapper","original":{"line":87,"column":12},"generated":{"line":1,"column":1590}},{"source":"static/modules/userControl.js","name":"classList","original":{"line":87,"column":20},"generated":{"line":1,"column":1592}},{"source":"static/modules/userControl.js","name":"remove","original":{"line":87,"column":30},"generated":{"line":1,"column":1602}},{"source":"static/modules/userControl.js","original":{"line":87,"column":37},"generated":{"line":1,"column":1609}},{"source":"static/modules/userControl.js","original":{"line":88,"column":27},"generated":{"line":1,"column":1633}},{"source":"static/modules/userControl.js","name":"bool","original":{"line":88,"column":19},"generated":{"line":1,"column":1636}},{"source":"static/modules/userControl.js","name":"wrapper","original":{"line":89,"column":12},"generated":{"line":1,"column":1640}},{"source":"static/modules/userControl.js","name":"classList","original":{"line":89,"column":20},"generated":{"line":1,"column":1642}},{"source":"static/modules/userControl.js","name":"remove","original":{"line":89,"column":30},"generated":{"line":1,"column":1652}},{"source":"static/modules/userControl.js","original":{"line":89,"column":37},"generated":{"line":1,"column":1659}},{"source":"static/modules/userControl.js","name":"wrapper","original":{"line":90,"column":12},"generated":{"line":1,"column":1688}},{"source":"static/modules/userControl.js","name":"classList","original":{"line":90,"column":20},"generated":{"line":1,"column":1690}},{"source":"static/modules/userControl.js","name":"add","original":{"line":90,"column":30},"generated":{"line":1,"column":1700}},{"source":"static/modules/userControl.js","original":{"line":90,"column":34},"generated":{"line":1,"column":1704}},{"source":"static/modules/userControl.js","name":"getRole","original":{"line":94,"column":4},"generated":{"line":1,"column":1729}},{"source":"static/modules/userControl.js","name":"console","original":{"line":95,"column":8},"generated":{"line":1,"column":1739}},{"source":"static/modules/userControl.js","name":"log","original":{"line":95,"column":16},"generated":{"line":1,"column":1747}},{"source":"static/modules/userControl.js","original":{"line":95,"column":20},"generated":{"line":1,"column":1751}},{"source":"static/modules/userControl.js","name":"user","original":{"line":95,"column":28},"generated":{"line":1,"column":1758}},{"source":"static/modules/userControl.js","name":"active","original":{"line":95,"column":33},"generated":{"line":1,"column":1760}},{"source":"static/modules/userControl.js","name":"data","original":{"line":95,"column":40},"generated":{"line":1,"column":1767}},{"source":"static/modules/userControl.js","name":"role","original":{"line":95,"column":45},"generated":{"line":1,"column":1772}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":1780}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":1788}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":1793}},{"source":"static/modules/userControl.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1795}},{"source":"static/modules/userControl.js","name":"roles","original":{"line":99,"column":6},"generated":{"line":1,"column":1801}},{"source":"static/modules/userControl.js","original":{"line":99,"column":14},"generated":{"line":1,"column":1803}},{"source":"static/modules/userControl.js","name":"user","original":{"line":100,"column":4},"generated":{"line":1,"column":1804}},{"source":"static/modules/userControl.js","original":{"line":100,"column":10},"generated":{"line":1,"column":1809}},{"source":"static/modules/userControl.js","name":"settings","original":{"line":101,"column":8},"generated":{"line":1,"column":1810}},{"source":"static/modules/userControl.js","original":{"line":101,"column":18},"generated":{"line":1,"column":1820}},{"source":"static/modules/userControl.js","name":"config","original":{"line":102,"column":8},"generated":{"line":1,"column":1822}},{"source":"static/modules/userControl.js","original":{"line":102,"column":16},"generated":{"line":1,"column":1830}},{"source":"static/modules/userControl.js","name":"poweruser","original":{"line":104,"column":4},"generated":{"line":1,"column":1833}},{"source":"static/modules/userControl.js","original":{"line":104,"column":15},"generated":{"line":1,"column":1843}},{"source":"static/modules/userControl.js","name":"settings","original":{"line":105,"column":8},"generated":{"line":1,"column":1844}},{"source":"static/modules/userControl.js","original":{"line":105,"column":18},"generated":{"line":1,"column":1854}},{"source":"static/modules/userControl.js","name":"config","original":{"line":106,"column":8},"generated":{"line":1,"column":1856}},{"source":"static/modules/userControl.js","original":{"line":106,"column":16},"generated":{"line":1,"column":1864}},{"source":"static/modules/userControl.js","name":"admin","original":{"line":108,"column":4},"generated":{"line":1,"column":1867}},{"source":"static/modules/userControl.js","original":{"line":108,"column":11},"generated":{"line":1,"column":1873}},{"source":"static/modules/userControl.js","name":"settings","original":{"line":109,"column":8},"generated":{"line":1,"column":1874}},{"source":"static/modules/userControl.js","original":{"line":109,"column":18},"generated":{"line":1,"column":1884}},{"source":"static/modules/userControl.js","name":"config","original":{"line":110,"column":8},"generated":{"line":1,"column":1886}},{"source":"static/modules/userControl.js","original":{"line":110,"column":16},"generated":{"line":1,"column":1894}},{"source":"static/modules/userControl.js","name":"domAccess","original":{"line":114,"column":6},"generated":{"line":1,"column":1898}},{"source":"static/modules/userControl.js","original":{"line":114,"column":18},"generated":{"line":1,"column":1900}},{"source":"static/modules/userControl.js","name":"init","original":{"line":115,"column":4},"generated":{"line":1,"column":1901}},{"source":"static/modules/userControl.js","name":"console","original":{"line":116,"column":8},"generated":{"line":1,"column":1908}},{"source":"static/modules/userControl.js","name":"log","original":{"line":116,"column":16},"generated":{"line":1,"column":1916}},{"source":"static/modules/userControl.js","name":"domAccess","original":{"line":116,"column":20},"generated":{"line":1,"column":1920}},{"source":"static/modules/userControl.js","name":"getNodes","original":{"line":116,"column":30},"generated":{"line":1,"column":1922}},{"source":"static/modules/userControl.js","name":"user","original":{"line":117,"column":8},"generated":{"line":1,"column":1934}},{"source":"static/modules/userControl.js","name":"getRole","original":{"line":117,"column":13},"generated":{"line":1,"column":1936}},{"source":"static/modules/userControl.js","name":"domAccess","original":{"line":118,"column":8},"generated":{"line":1,"column":1946}},{"source":"static/modules/userControl.js","name":"generateRightsForm","original":{"line":118,"column":18},"generated":{"line":1,"column":1948}},{"source":"static/modules/userControl.js","name":"getNodes","original":{"line":121,"column":4},"generated":{"line":1,"column":1970}},{"source":"static/modules/userControl.js","original":{"line":121,"column":12},"generated":{"line":1,"column":1979}},{"source":"static/modules/userControl.js","original":{"line":122,"column":15},"generated":{"line":1,"column":1984}},{"source":"static/modules/userControl.js","original":{"line":122,"column":20},"generated":{"line":1,"column":1986}},{"source":"static/modules/userControl.js","original":{"line":122,"column":20},"generated":{"line":1,"column":1988}},{"source":"static/modules/userControl.js","original":{"line":122,"column":20},"generated":{"line":1,"column":1994}},{"source":"static/modules/userControl.js","original":{"line":122,"column":37},"generated":{"line":1,"column":2011}},{"source":"static/modules/userControl.js","name":"generateRightsForm","original":{"line":125,"column":4},"generated":{"line":1,"column":2014}},{"source":"static/modules/userControl.js","original":{"line":126,"column":22},"generated":{"line":1,"column":2036}},{"source":"static/modules/userControl.js","original":{"line":126,"column":27},"generated":{"line":1,"column":2038}},{"source":"static/modules/userControl.js","original":{"line":126,"column":27},"generated":{"line":1,"column":2040}},{"source":"static/modules/userControl.js","original":{"line":126,"column":27},"generated":{"line":1,"column":2046}},{"source":"static/modules/userControl.js","name":"$form","original":{"line":126,"column":14},"generated":{"line":1,"column":2074}},{"source":"static/modules/userControl.js","name":"$rightsList","original":{"line":127,"column":14},"generated":{"line":1,"column":2080}},{"source":"static/modules/userControl.js","original":{"line":127,"column":28},"generated":{"line":1,"column":2083}},{"source":"static/modules/userControl.js","original":{"line":127,"column":33},"generated":{"line":1,"column":2085}},{"source":"static/modules/userControl.js","original":{"line":127,"column":33},"generated":{"line":1,"column":2087}},{"source":"static/modules/userControl.js","original":{"line":127,"column":33},"generated":{"line":1,"column":2093}},{"source":"static/modules/userControl.js","name":"domAccess","original":{"line":128,"column":23},"generated":{"line":1,"column":2147}},{"source":"static/modules/userControl.js","name":"getNodes","original":{"line":128,"column":33},"generated":{"line":1,"column":2149}},{"source":"static/modules/userControl.js","name":"forEach","original":{"line":129,"column":15},"generated":{"line":1,"column":2160}},{"source":"static/modules/userControl.js","name":"n","original":{"line":129,"column":24},"generated":{"line":1,"column":2168}},{"source":"static/modules/userControl.js","name":"name","original":{"line":130,"column":18},"generated":{"line":1,"column":2172}},{"source":"static/modules/userControl.js","name":"name","original":{"line":130,"column":18},"generated":{"line":1,"column":2178}},{"source":"static/modules/userControl.js","name":"n","original":{"line":130,"column":25},"generated":{"line":1,"column":2180}},{"source":"static/modules/userControl.js","name":"dataset","original":{"line":130,"column":27},"generated":{"line":1,"column":2182}},{"source":"static/modules/userControl.js","name":"access","original":{"line":130,"column":35},"generated":{"line":1,"column":2190}},{"source":"static/modules/userControl.js","name":"tempStr","original":{"line":131,"column":18},"generated":{"line":1,"column":2197}},{"source":"static/modules/userControl.js","name":"name","original":{"line":133,"column":47},"generated":{"line":1,"column":2290}},{"source":"static/modules/userControl.js","name":"name","original":{"line":134,"column":51},"generated":{"line":1,"column":2352}},{"source":"static/modules/userControl.js","name":"$rightsList","original":{"line":137,"column":12},"generated":{"line":1,"column":2398}},{"source":"static/modules/userControl.js","name":"innerHTML","original":{"line":137,"column":24},"generated":{"line":1,"column":2400}},{"source":"static/modules/userControl.js","name":"tempStr","original":{"line":137,"column":37},"generated":{"line":1,"column":2411}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":2417}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":2425}},{"source":"static/modules/userControl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":2435}}],"sources":{"static/modules/userControl.js":"import {auth} from './plugins/firebase';\nimport {ui, templates, render, createToast} from './uiControl';\nimport {data} from './dataControl';\nimport {formError} from './utils';\nimport {node} from 'cutleryjs';\n\nconst user = {   \n    async init() {        \n        auth.onAuthStateChanged(async state => {\n            if (state) {\n                user.active = await this.getUserData(state.uid);\n                \n                templates.switch('groupSelect', () => {\n                    user.ui(user.active.data.access);\n                }, true);\n            } else {\n                templates.switch('userLogIn');\n            }\n        })\n    },\n    \n    logIn({email, passw}) {\n        createToast({\n            title: 'Login',\n            content: 'Je wordt aangemeld',\n        })\n        user.logInScreen(false);\n        auth.signInWithEmailAndPassword(email, passw)\n        .then(resp => {console.log(resp)})\n        .catch(err => {\n            if (err.code == 'auth/user-not-found') formError('Deze gebruiker werd niet gevonden');\n            user.logInScreen(true);\n        });\n    },\n    \n    demoLogin() {\n        // createToast({\n        //     title: 'Demo login',\n        //     content: 'Demo omgeving wordt ingeladen',\n        // })\n        user.logIn({\n            email: 'demo@haegepoorters.be',\n            passw: 'demo123'\n        })\n    },\n    \n    logOut() {\n        createToast({\n            title: 'Afmelden',\n            content: 'Je wordt afgemeld',\n        })\n        auth.signOut();\n    },\n    \n    checkForLogIn() {\n        if (ui.shareMode() != true) templates.switch('groupSelect');\n    },\n    \n    async getUserData(id) {\n        const response = await data.getDoc('users', id);\n        return response\n    },\n    \n    async ui(accessData = null) {\n        if (accessData == null) {accessData = user.active.data.access};\n               \n        const groups = ['kapoenen', 'welpen', 'woudlopers', 'jonggivers', 'givers', 'groepsleiding', 'demo'];\n        groups.forEach(group => {\n            const input = node(`#form_step1 input[value=\"${group}\"]`).closest('.form__group');\n            if (accessData[group] == 'none' && input) input.remove();\n        })\n    },\n    \n    accessControl() {\n        const access = user.active ? user.active.data.access[window.appSettings.group] : 'none';\n        \n        if (access == 'none') console.log('prohibited access')\n        if (access == 'read') ui.readMode(true);\n        if (access == 'write') ui.readMode(false);\n    },\n    \n    logInScreen(bool = true) {\n        const wrapper = node('[data-section=\"step0\"] .login-wrapper');\n        \n        if (bool == false) {\n            wrapper.classList.add('login-wrapper--validating');\n            wrapper.classList.remove('login-wrapper--form');\n        } else if (bool == true) {\n            wrapper.classList.remove('login-wrapper--validating');\n            wrapper.classList.add('login-wrapper--form');\n        }\n    },\n        \n    getRole() {\n        console.log('user', user.active.data.role);\n    },\n}\n\nconst roles = {\n    user: {\n        settings: false,\n        config: false\n    },\n    poweruser: {\n        settings: true,\n        config: false\n    },\n    admin: {\n        settings: true,\n        config: true\n    }\n}\n\nconst domAccess = {\n    init() {\n        console.log(domAccess.getNodes());\n        user.getRole();\n        domAccess.generateRightsForm();\n    },\n    \n    getNodes() {\n        return node('[data-access]', true);\n    },\n    \n    generateRightsForm() {\n        const $form = node('[data-form=\"userRights\"]');\n        const $rightsList = node('[data-form=\"userRights\"] [data-label=\"rightsList\"]');\n        const $nodes = domAccess.getNodes();\n        $nodes.forEach((n) => {\n            const name = n.dataset.access;\n            const tempStr = `\n                <label class=\"d-block\">\n                    <span class=\"form-label\">${name}</span>\n                    <input type=\"checkbox\" name=\"${name}\">\n                </label>\n            `;\n            $rightsList.innerHTML += tempStr;\n        })\n    }\n}\n\nexport {\n    user,\n    domAccess\n}"},"lineCount":null}},"error":null,"hash":"bea8697f7a92987480eb49550041369f","cacheData":{"env":{}}}